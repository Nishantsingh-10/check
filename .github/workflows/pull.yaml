name: My workflow

on: 
  pull_request:
     branches: main
  workflow_dispatch:
  
jobs:
  build:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v3
    - name: Print pull request branch
      run: branch_name=$(echo "Pull request branch:$GITHUB_HEAD_REF")

    - name: Print pull request branch
      run: echo "$GITHUB_HEAD_REF"
    - name: Print pull request branch
      run: echo "branch_name"
      
    - name: checkout the repo
      uses: actions/checkout@v3
      with:
         ref: $branch_name
         token: ${{ secrets.TOKEN }}
    - name: Extract branch name
      run: |
        # Extract the branch name from the GITHUB_REF variable
        branch_name1=$(echo $GITHUB_REF | cut -d '/' -f 1)
        branch_name2=$(echo $GITHUB_REF | cut -d '/' -f 2)
        branch_name3=$(echo $GITHUB_REF | cut -d '/' -f 3)
        branch_name4=$(echo $GITHUB_REF | cut -d '/' -f 4)
        branch_name5=$(echo $GITHUB_REF | cut -d '/' -f 5)
        echo "Branch name: $branch_name1"
        echo "Branch name: $branch_name2"
        echo "Branch name: $branch_name3"
        echo "Branch name: $branch_name4"
        echo "Branch name: $branch_name5"
